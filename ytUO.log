ok
Config
2017-08-11T04:11:07.290Z
Cognito
the cognitoidentity is [object Object]
SNS
setting tcp
setting sns
PostAPI
PostAPI_Chat
PostAPI_Wall
PostAPI_Pet
PostAPI_Chips
PostAPI_Login
PostAPI_Shop
PostAPI_Debug
Game init
======================
apiPort listening 2493
tcpPort listening 3001
======================
Server listening at port 3001
[0mGET / [32m200 [0m28.695 ms - 11[0m
[0mGET / [32m200 [0m21.620 ms - 11[0m
************************************************************************
==============================Middleware================================
************************************************************************
io enter middleware
before decrypt +AG405pJ6B9uVlEtShVbbw==
after decrypt vincent63472
Player ID isvincent63472
************************************************************************
========================Register tcp connection=========================
************************************************************************
On Connection:{"headers":{"x-forwarded-for":"101.78.215.254","x-forwarded-proto":"http","x-forwarded-port":"3000","host":"socketioloadbalancer-1642928803.us-east-1.elb.amazonaws.com:3000","x-amzn-trace-id":"Root=1-598d2e65-6974008507bcb00377d47377","upgrade":"websocket","connection":"upgrade","sec-websocket-version":"13","origin":"ws://socketioloadbalancer-1642928803.us-east-1.elb.amazonaws.com:3000","sec-websocket-key":"dm1zbWl3cWV3ZHl2aXVncA=="},"time":"Fri Aug 11 2017 04:11:17 GMT+0000 (UTC)","address":"::ffff:172.31.24.250","xdomain":true,"secure":false,"issued":1502424677295,"url":"/socket.io/?transport=websocket&pass=%2BAG405pJ6B9uVlEtShVbbw%3D%3D&playerId=vincent63472","query":{"transport":"websocket","pass":"+AG405pJ6B9uVlEtShVbbw==","playerId":"vincent63472"}}
player id vincent63472
hmsent register {"awesome_id":"vincent63472","onlineStatus":2,"awesome_chips":0,"login_times":1}
[ { id: { S: 'vincent63472' }, awesome_chips: { N: '590' } } ]
hmsent awesomeChips {"awesome_id":"vincent63472","onlineStatus":"2","awesome_chips":"590","login_times":"1"}
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
action_packet {
  "packet_id" : "6F409216-BD51-4C85-949F-FDA503EF6FFC-71219-0000964C936581EE",
  "action_name" : "send_message",
  "action_content" : {
    "recipient_id" : "vincent9",
    "sender_name" : "vincent6",
    "group_id" : "vincent63472:vincent9",
    "message_id" : "D71AF838-202F-41F9-88CC-C28BE0008CE8-43570-0000960B16849D15",
    "message_type" : "TEXT",
    "message" : "123",
    "video_type" : ".mov",
    "sender_id" : "vincent63472"
  }
}
************************************************************************
===============================Send message=============================
************************************************************************
{
  "packet_id" : "6F409216-BD51-4C85-949F-FDA503EF6FFC-71219-0000964C936581EE",
  "action_name" : "send_message",
  "action_content" : {
    "recipient_id" : "vincent9",
    "sender_name" : "vincent6",
    "group_id" : "vincent63472:vincent9",
    "message_id" : "D71AF838-202F-41F9-88CC-C28BE0008CE8-43570-0000960B16849D15",
    "message_type" : "TEXT",
    "message" : "123",
    "video_type" : ".mov",
    "sender_id" : "vincent63472"
  }
}
sendMessageToFriendIncludeResend successful
send message v3 success vincent9
***** send_message_v2 *****
{ recipient_id: 'vincent9',
  sender_name: 'vincent6',
  group_id: 'vincent63472:vincent9',
  message_id: 'D71AF838-202F-41F9-88CC-C28BE0008CE8-43570-0000960B16849D15',
  message_type: 'TEXT',
  message: '123',
  video_type: '.mov',
  sender_id: 'vincent63472',
  dynamo_id: 'ac10da9a-d8ea-4d28-bf96-61103bf06ac9',
  create_at: '2017-08-11T04:11:17.778Z' }
action_packet {
  "packet_id" : "B174A1E0-9DEF-4AAF-91BA-A9F27E0A107D-71219-0000964C9A44D7B3",
  "action_name" : "send_message",
  "action_content" : {
    "recipient_id" : "vincent9",
    "sender_name" : "vincent6",
    "group_id" : "vincent63472:vincent9",
    "message_id" : "2A398779-C539-4CFF-BDB3-F7E3B89A5A01-71219-0000960F20C767F3",
    "message_type" : "TEXT",
    "message" : "12",
    "video_type" : ".mov",
    "sender_id" : "vincent63472"
  }
}
************************************************************************
===============================Send message=============================
************************************************************************
{
  "packet_id" : "B174A1E0-9DEF-4AAF-91BA-A9F27E0A107D-71219-0000964C9A44D7B3",
  "action_name" : "send_message",
  "action_content" : {
    "recipient_id" : "vincent9",
    "sender_name" : "vincent6",
    "group_id" : "vincent63472:vincent9",
    "message_id" : "2A398779-C539-4CFF-BDB3-F7E3B89A5A01-71219-0000960F20C767F3",
    "message_type" : "TEXT",
    "message" : "12",
    "video_type" : ".mov",
    "sender_id" : "vincent63472"
  }
}
sendMessageToFriendIncludeResend successful
send message v3 success vincent9
***** send_message_v2 *****
{ recipient_id: 'vincent9',
  sender_name: 'vincent6',
  group_id: 'vincent63472:vincent9',
  message_id: '2A398779-C539-4CFF-BDB3-F7E3B89A5A01-71219-0000960F20C767F3',
  message_type: 'TEXT',
  message: '12',
  video_type: '.mov',
  sender_id: 'vincent63472',
  dynamo_id: '3c1a8e9c-7acb-4f93-839d-a8d634faed38',
  create_at: '2017-08-11T04:11:17.785Z' }
hgetall{"awesome_id":"vincent63472","onlineStatus":"2","awesome_chips":"590","login_times":"1"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
send sns data, data is {"awesome_id":"vincent9","message":"vincent6 : 123","extra":{"message_type":"single_chat","from_player":"vincent63472"}}
send sns data, extra data is {"message_type":"single_chat","from_player":"vincent63472"}
send sns data, data is {"awesome_id":"vincent9","message":"vincent6 : 12","extra":{"message_type":"single_chat","from_player":"vincent63472"}}
send sns data, extra data is {"message_type":"single_chat","from_player":"vincent63472"}
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
hgetall{"onlineStatus":"2","login_times":"1","awesome_chips":"590","awesome_id":"vincent63472","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
[0mGET / [32m200 [0m21.195 ms - 11[0m
[0mGET / [32m200 [0m20.174 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
[0mGET / [32m200 [0m1.255 ms - 11[0m
[0mGET / [32m200 [0m2.811 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
[0mGET / [32m200 [0m0.557 ms - 11[0m
[0mGET / [32m200 [0m0.829 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
[0mGET / [32m200 [0m0.998 ms - 11[0m
[0mGET / [32m200 [0m1.126 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
[0mGET / [32m200 [0m1.864 ms - 11[0m
[0mGET / [32m200 [0m2.507 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
[0mGET / [32m200 [0m0.707 ms - 11[0m
[0mGET / [32m200 [0m0.955 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
[0mGET / [32m200 [0m1.369 ms - 11[0m
[0mGET / [32m200 [0m1.134 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
[0mGET / [32m200 [0m0.538 ms - 11[0m
[0mGET / [32m200 [0m0.822 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
[0mGET / [32m200 [0m0.898 ms - 11[0m
[0mGET / [32m200 [0m1.266 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
[0mGET / [32m200 [0m0.946 ms - 11[0m
[0mGET / [32m200 [0m0.948 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
[0mGET / [32m200 [0m1.332 ms - 11[0m
[0mGET / [32m200 [0m1.672 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
[0mGET / [32m200 [0m0.501 ms - 11[0m
[0mGET / [32m200 [0m0.628 ms - 11[0m
************************************************************************
===============================Notify online============================
************************************************************************
{
  "friend_ids" : [
    "conniechen",
    "andrewwan",
    "vincent8",
    "awesome",
    "vincent",
    "vincent63472",
    "ivan",
    "hellowin",
    "vincent9",
    "vincent7",
    "testonly"
  ]
}
Send message channel:vincent63472:friend_online msg:{"friendId":"vincent63472"}
hgetall{"onlineStatus":"2","login_times":"1","friendIds":"[\"conniechen\",\"andrewwan\",\"vincent8\",\"awesome\",\"vincent\",\"vincent63472\",\"ivan\",\"hellowin\",\"vincent9\",\"vincent7\",\"testonly\"]","awesome_id":"vincent63472","awesome_chips":"590"}
hgetallvincent63472
error: Forever detected script was killed by signal: SIGKILL
